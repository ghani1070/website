<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#ff8a65">
<title>üêº Game Matematika - Kung Fu Panda</title>

<style>
body{
    margin:0;
    font-family: Arial, Helvetica, sans-serif;
    background: linear-gradient(135deg,#ffcc80,#ff8a65);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}

.game-box{
    background:#fff;
    width:360px;
    padding:25px;
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,.25);
    text-align:center;
}

h1{margin-top:0}

.soal{
    font-size:28px;
    font-weight:bold;
    margin:20px 0;
}

input{
    width:100%;
    padding:12px;
    font-size:18px;
    border-radius:8px;
    border:1px solid #ccc;
    margin-bottom:12px;
}

.btn{
    width:100%;
    padding:12px;
    font-size:18px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    color:white;
}

.btn-jawab{background:#ff7043}
.btn-jawab:hover{background:#ff5722}

.controls{
    display:flex;
    gap:10px;
    margin-top:10px;
}

.btn-mulai{background:#4caf50}
.btn-pause{background:#ff9800}
.btn-reset{background:#f44336}

.info{
    margin-top:15px;
    font-size:14px;
}

#cara{
    margin-top:15px;
    background:#f7f7f7;
    padding:12px;
    border-radius:10px;
    text-align:left;
    font-size:14px;
    display:none;
}

.benar{color:green;font-weight:bold}
.salah{color:red;font-weight:bold}
</style>
</head>

<body>

<div class="game-box">
    <h1>üß† Game Matematika</h1>

    <div id="soal" class="soal">Tekan Mulai</div>

    <input type="number" id="jawaban" placeholder="Jawaban" disabled>

    <button class="btn btn-jawab" onclick="cekJawaban()">Jawab</button>

    <div class="controls">
        <button class="btn btn-mulai" onclick="mulaiGame()">‚ñ∂ Mulai</button>
        <button class="btn btn-pause" onclick="pauseGame()">‚è∏ Berhenti</button>
        <button class="btn btn-reset" onclick="resetGame()">üîÅ Ulangi</button>
    </div>

    <div class="info">
        ‚è± Waktu: <span id="waktu">60</span> detik<br>
        ‚≠ê Skor: <span id="skor">0</span><br>
        üéØ Level: <span id="level">1</span>
    </div>

    <div id="status"></div>
    <div id="cara"></div>
</div>

<script>
let angka1, angka2, hasil;
let skor = 0;
let level = 1;

const WAKTU_SOAL = 60;
const WAKTU_CARA = 12;

let waktu = WAKTU_SOAL;
let timerSoal = null;
let timerCara = null;
let gameAktif = false;

// =====================
function buatSoal(){
    angka1 = Math.floor(Math.random()*5)+1;
    angka2 = Math.floor(Math.random()*5)+1;
    hasil = angka1 * angka2;

    document.getElementById("soal").innerText =
        `${angka1} √ó ${angka2} = ?`;

    document.getElementById("jawaban").value = "";
    document.getElementById("jawaban").disabled = false;
    document.getElementById("status").innerHTML = "";
    document.getElementById("cara").style.display = "none";

    waktu = WAKTU_SOAL;
    document.getElementById("waktu").innerText = waktu;
}

// =====================
function mulaiGame(){
    if(gameAktif) return;

    gameAktif = true;

    // üî• INI YANG KURANG
    if(document.getElementById("soal").innerText === "Tekan Mulai"){
        buatSoal();
    }

    document.getElementById("jawaban").disabled = false;
    document.getElementById("jawaban").focus();

    clearInterval(timerSoal);
    timerSoal = setInterval(()=>{
        waktu--;
        document.getElementById("waktu").innerText = waktu;

        if(waktu <= 0){
            pauseGame();
            document.getElementById("status").innerHTML =
                "<p class='salah'>‚è∞ Waktu Habis</p>";
            tampilkanCara();
        }
    },1000);
}


// =====================
function pauseGame(){
    gameAktif = false;
    clearInterval(timerSoal);
    clearInterval(timerCara);
}

// =====================
function resetGame(){
    pauseGame();
    skor = 0;
    level = 1;

    document.getElementById("skor").innerText = skor;
    document.getElementById("level").innerText = level;
    document.getElementById("soal").innerText = "Tekan Mulai";
    document.getElementById("jawaban").disabled = true;
    document.getElementById("status").innerHTML = "";
    document.getElementById("cara").style.display = "none";
    document.getElementById("waktu").innerText = WAKTU_SOAL;
}

// =====================
function cekJawaban(){
    if(!gameAktif) return;
    pauseGame();

    let jawab = parseInt(document.getElementById("jawaban").value);

    if(jawab === hasil){
        skor += 10;
        document.getElementById("status").innerHTML =
            "<p class='benar'>‚úî Jawaban Benar</p>";
    } else {
        document.getElementById("status").innerHTML =
            "<p class='salah'>‚úñ Jawaban Salah</p>";
    }

    document.getElementById("skor").innerText = skor;

    if(skor % 50 === 0){
        level++;
        document.getElementById("level").innerText = level;
    }

    tampilkanCara();
}

// =====================
function tampilkanCara(){
    let penjumlahan = [];
    for(let i=0;i<angka2;i++) penjumlahan.push(angka1);

    document.getElementById("cara").innerHTML = `
        <b>Contoh cara mengerjakan:</b><br>
        ${angka1} √ó ${angka2} = ${penjumlahan.join(" + ")}<br>
        ${penjumlahan.join(" + ")} = ${hasil}<br>
        <b>Hasil = ${hasil}</b><br><br>
        <i>Soal berikutnya dalam <span id="timerCara">${WAKTU_CARA}</span> detik</i>
    `;
    document.getElementById("cara").style.display = "block";

    let sisa = WAKTU_CARA;
    timerCara = setInterval(()=>{
        sisa--;
        document.getElementById("timerCara").innerText = sisa;
        if(sisa <= 0){
            clearInterval(timerCara);
            buatSoal();
            mulaiGame();
        }
    },1000);
}
</script>

<script>
document.addEventListener("click", () => {
    if (window.innerWidth <= 768) {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen().catch(()=>{});
        }
    }
}, { once: true });
</script>
</body>
</html>
