<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêº Game Matematika</title>

<style>
*{box-sizing:border-box}
body{
    margin:0;
    font-family:Arial,Helvetica,sans-serif;
    background:linear-gradient(135deg,#ffcc80,#ff8a65);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}

.game-box{
    background:#fff;
    width:100%;
    max-width:380px;
    padding:24px;
    border-radius:20px;
    box-shadow:0 25px 50px rgba(0,0,0,.3);
    text-align:center;
}

h1{margin:0 0 10px}

.soal{
    font-size:30px;
    font-weight:bold;
    margin:20px 0;
}

input{
    width:100%;
    padding:12px;
    font-size:18px;
    border-radius:10px;
    border:1px solid #ccc;
}

.btn{
    width:100%;
    padding:12px;
    font-size:18px;
    border:none;
    border-radius:12px;
    margin-top:10px;
    cursor:pointer;
    color:#fff;
}

.jawab{background:#ff7043}
.jawab:hover{background:#ff5722}

.controls{
    display:flex;
    gap:8px;
    margin-top:12px;
}

.controls button{
    flex:1;
    padding:12px;
    border-radius:12px;
    font-size:14px;
    border:none;
    color:#fff;
    cursor:pointer;
}

.mulai{background:#4caf50}
.pause{background:#ff9800}
.reset{background:#f44336}
.next{background:#2196f3}

.info{
    margin-top:12px;
    font-size:14px;
}

#cara{
    display:none;
    margin-top:12px;
    background:#f5f5f5;
    padding:12px;
    border-radius:12px;
    text-align:left;
}

.benar{color:green;font-weight:bold}
.salah{color:red;font-weight:bold}

.volume{
    margin-top:12px;
    text-align:left;
    font-size:14px;
}

@media(max-width:480px){
    body{padding:10px}
    .game-box{border-radius:16px}
}
</style>
</head>

<body>

<div class="game-box">
    <h1>üß† Game Matematika</h1>

    <div id="soal" class="soal">Tekan Mulai</div>

    <input type="number" id="jawaban" placeholder="Jawaban" disabled>

    <button class="btn jawab" onclick="cekJawaban()">Jawab</button>

    <div class="controls">
        <button class="mulai" onclick="mulaiGame()">‚ñ∂ Mulai</button>
        <button class="pause" onclick="pauseGame()">‚è∏ Berhenti</button>
        <button class="reset" onclick="resetGame()">üîÑ Ulangi</button>
        <button class="next" onclick="nextSoal()">‚û° Next</button>
    </div>

    <div class="info">
        ‚è± Waktu: <span id="waktu">60</span> detik<br>
        ‚≠ê Skor: <span id="skor">0</span><br>
        üéØ Level: <span id="level">1</span>
    </div>

    <div id="status"></div>
    <div id="cara"></div>

    <div class="volume">
        üîä Volume
        <input type="range" min="0" max="1" step="0.01" value="0.5"
               oninput="aturVolume(this.value)">
    </div>
</div>

<!-- AUDIO -->
<audio id="bgMusic" src="sounds/bg-music.mp3" loop></audio>
<audio id="sfxCorrect" src="sounds/correct.mp3"></audio>
<audio id="sfxWrong" src="sounds/wrong.mp3"></audio>
<audio id="sfxTimeout" src="sounds/timeout.mp3"></audio>

<script>
let a,b,hasil;
let skor=0, level=1;
let waktu=60;
let timer=null;
let aktif=false;

// AUDIO
const bgMusic=document.getElementById("bgMusic");
const sfxCorrect=document.getElementById("sfxCorrect");
const sfxWrong=document.getElementById("sfxWrong");
const sfxTimeout=document.getElementById("sfxTimeout");

bgMusic.volume=0.5;
sfxCorrect.volume=sfxWrong.volume=sfxTimeout.volume=0.7;

function aturVolume(v){
    bgMusic.volume=v;
}

function buatSoal(){
    a=Math.floor(Math.random()*5)+1;
    b=Math.floor(Math.random()*5)+1;
    hasil=a*b;
    document.getElementById("soal").innerText=`${a} √ó ${b} = ?`;
    document.getElementById("jawaban").value="";
    document.getElementById("jawaban").disabled=false;
    document.getElementById("cara").style.display="none";
    document.getElementById("status").innerHTML="";
    waktu=60;
    document.getElementById("waktu").innerText=waktu;
}

function mulaiGame(){
    if(aktif) return;
    aktif=true;
    bgMusic.play().catch(()=>{});
    buatSoal();

    timer=setInterval(()=>{
        waktu--;
        document.getElementById("waktu").innerText=waktu;
        if(waktu<=0){
            sfxTimeout.play();
            pauseGame();
            tampilkanCara();
        }
    },1000);
}

function pauseGame(){
    aktif=false;
    clearInterval(timer);
}

function resetGame(){
    pauseGame();
    skor=0; level=1;
    document.getElementById("skor").innerText=skor;
    document.getElementById("level").innerText=level;
    document.getElementById("soal").innerText="Tekan Mulai";
    document.getElementById("jawaban").disabled=true;
    document.getElementById("cara").style.display="none";
}

function nextSoal(){
    if(!aktif) return;
    buatSoal();
}

function cekJawaban(){
    if(!aktif) return;
    let j=parseInt(document.getElementById("jawaban").value);
    if(j===hasil){
        skor+=10;
        sfxCorrect.play();
        document.getElementById("status").innerHTML="<p class='benar'>‚úî Benar</p>";
    }else{
        sfxWrong.play();
        document.getElementById("status").innerHTML="<p class='salah'>‚úñ Salah</p>";
    }
    document.getElementById("skor").innerText=skor;
    if(skor%50===0){
        level++;
        document.getElementById("level").innerText=level;
    }
    tampilkanCara();
}

function tampilkanCara(){
    let isi=`
    <b>Cara mengerjakan:</b><br>
    ${a} √ó ${b} = ${a}+${a}+${a} (${b} kali)<br>
    <b>Hasil = ${hasil}</b>`;
    document.getElementById("cara").innerHTML=isi;
    document.getElementById("cara").style.display="block";
}
</script>

</body>
</html>